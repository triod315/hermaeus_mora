{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="{% static 'css/ac.css' %}">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
</head>
<body>
    <div class="guessing_form">
        <div class="cound_selection">
            <label id="count_label"> Number of chars: </label>
            <input class="chars_number" id="chars_number" type="number" value="1" step="1" min="1" max="100">
            <br />
            <button id="input_create_button" onclick="addFields()">Create</button>
        </div>

        <div id="letters">
            <script>
                $(".chars_number").keyup(function(event) {
                    if (event.key == "Enter") {
                        addFields();
                    }
                });

                function addFields(){
                    // Number of inputs to create
                    var number = document.getElementById("chars_number").value;
                    // Container <div> where dynamic content will be placed
                    var container = document.getElementById("letters");
                    // Clear previous contents of the container
                    while (container.hasChildNodes()) {
                        container.removeChild(container.lastChild);
                    }
                    for (i=0;i<number;i++){
                        // Create an <input> element, set its type and name attributes
                        var input = document.createElement("input");
                        input.type = "text";
                        input.name = "input_"+i;
                        input.className="charInput";
                        input.id=i;
                        input.value="*";
                        input.maxLength=1;
                        container.appendChild(input);
                    }
                }
            </script>
        </div>

        <hr />

        <div class="possible_letters">
            <input class="only_sl" id="only_sl" type="checkbox" checked="true">
            <label id="usl_label"> Use only letters below </label>

            <div class="cound_selection">
            <label id="count_sl_label"> number of chars: </label>
            <input class="chars_sl_number" id="chars_sl_number" type="number" value="1" step="1" min="1" max="100">
            <br />
            <button id="input_sl_create_button" onclick="addPossFields()">Create</button>
        </div>

        <div id="poss_letters">
            <script>
                $(".chars_sl_number").keyup(function(event) {
                    if (event.key == "Enter") {
                        addPossFields();
                    }
                });

                function addPossFields(){
                    // Number of inputs to create
                    var number = document.getElementById("chars_sl_number").value;
                    // Container <div> where dynamic content will be placed
                    var container = document.getElementById("poss_letters");
                    // Clear previous contents of the container
                    while (container.hasChildNodes()) {
                        container.removeChild(container.lastChild);
                    }
                    for (i=0;i<number;i++){
                        // Create an <input> element, set its type and name attributes
                        var input = document.createElement("input");
                        input.type = "text";
                        input.name = "input_"+i;
                        input.className="charInput";
                        input.id="pos"+i;
                        input.value="";
                        input.maxLength=1;
                        container.appendChild(input);
                    }
                }
            </script>
        </div>

        </div>

        <hr />

        <button id="guess" onclick="find()">Find words</button>

        <script>
            function find() {
                var template="";
                var number = document.getElementById("chars_number").value;
                for (var i=0;i<number;i++)
                {
                    template+=$(".charInput")[i].value;
                }

                var poss_leters="";
                var np=$(".charInput").length-number;
                for (var i=number;i<$(".charInput").length;i++)
                {
                    poss_leters+=$(".charInput")[i].value;
                }

                var isChecked=document.getElementById(only_sl);

                $.ajax({
                    url: '/ajax/find_words/',
                    data: {
                        'template_word' : template,
                        'poss_leters' : poss_leters,
                        'isChecked' : isChecked
                    },
                    dataType: 'json',
                    success: function (data) {
                        alert(data.result);
                    }
                })

                console.log(poss_leters);
            }
        </script>
    </div>
</body>
</html>